<div class="dialog-container">
  <div class="dialog-header">
    <h2>Schedule Appointment</h2>
    <button mat-icon-button (click)="onCancel()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <form [formGroup]="appointmentForm" (ngSubmit)="onSubmit()">
    <div mat-dialog-content>
      <!-- Date -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Date</mat-label>
          <input matInput [matDatepicker]="picker" formControlName="appointmentDate" [min]="minDate">
          <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <mat-error *ngIf="appointmentForm.get('appointmentDate')?.hasError('required')">
            Date is required
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Time -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Select Time</mat-label>
          <mat-select formControlName="appointmentTime">
            <mat-option value="08:00">8:00 AM</mat-option>
            <mat-option value="08:15">8:15 AM</mat-option>
            <mat-option value="08:30">8:30 AM</mat-option>
            <mat-option value="08:45">8:45 AM</mat-option>
            <mat-option value="09:00">9:00 AM</mat-option>
            <mat-option value="09:15">9:15 AM</mat-option>
            <mat-option value="09:30">9:30 AM</mat-option>
            <mat-option value="09:45">9:45 AM</mat-option>
            <mat-option value="10:00">10:00 AM</mat-option>
            <mat-option value="10:15">10:15 AM</mat-option>
            <mat-option value="10:30">10:30 AM</mat-option>
            <mat-option value="10:45">10:45 AM</mat-option>
            <mat-option value="11:00">11:00 AM</mat-option>
            <mat-option value="11:15">11:15 AM</mat-option>
            <mat-option value="11:30">11:30 AM</mat-option>
            <mat-option value="11:45">11:45 AM</mat-option>
            <mat-option value="12:00">12:00 PM</mat-option>
            <mat-option value="12:15">12:15 PM</mat-option>
            <mat-option value="12:30">12:30 PM</mat-option>
            <mat-option value="12:45">12:45 PM</mat-option>
            <mat-option value="13:00">1:00 PM</mat-option>
            <mat-option value="13:15">1:15 PM</mat-option>
            <mat-option value="13:30">1:30 PM</mat-option>
            <mat-option value="13:45">1:45 PM</mat-option>
            <mat-option value="14:00">2:00 PM</mat-option>
            <mat-option value="14:15">2:15 PM</mat-option>
            <mat-option value="14:30">2:30 PM</mat-option>
            <mat-option value="14:45">2:45 PM</mat-option>
            <mat-option value="15:00">3:00 PM</mat-option>
            <mat-option value="15:15">3:15 PM</mat-option>
            <mat-option value="15:30">3:30 PM</mat-option>
            <mat-option value="15:45">3:45 PM</mat-option>
            <mat-option value="16:00">4:00 PM</mat-option>
            <mat-option value="16:15">4:15 PM</mat-option>
            <mat-option value="16:30">4:30 PM</mat-option>
            <mat-option value="16:45">4:45 PM</mat-option>
            <mat-option value="17:00">5:00 PM</mat-option>
          </mat-select>
          <mat-error *ngIf="appointmentForm.get('appointmentTime')?.hasError('required')">
            Time is required
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Location -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Location (Optional)</mat-label>
          <input matInput formControlName="location" placeholder="Enter location">
        </mat-form-field>
      </div>

      <!-- Participant -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Select Participant</mat-label>
          <mat-select formControlName="participantId">
            <mat-option *ngFor="let participant of participants" [value]="participant.id">
              {{ participant.fullName }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="appointmentForm.get('participantId')?.hasError('required')">
            Participant is required
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Doctor -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Select Doctor</mat-label>
          <mat-select formControlName="doctorId">
            <mat-option *ngFor="let doctor of doctors" [value]="doctor.id">
              {{ doctor.fullName }} - {{ doctor.specialization }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="appointmentForm.get('doctorId')?.hasError('required')">
            Doctor is required
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Trial -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Select Trial</mat-label>
          <mat-select formControlName="trialId">
            <mat-option *ngFor="let trial of trials" [value]="trial.id">
              {{ trial.name }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="appointmentForm.get('trialId')?.hasError('required')">
            Trial is required
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Notes -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Notes (Optional)</mat-label>
          <textarea matInput formControlName="notes" rows="3" placeholder="Add any notes"></textarea>
        </mat-form-field>
      </div>
    </div>

    <!-- Buttons -->
    <div class="dialog-actions">
      <button mat-button type="button" (click)="onCancel()">Cancel</button>
      <button mat-raised-button color="primary" type="submit" [disabled]="!appointmentForm.valid">
        Schedule
      </button>
    </div>
    <!-- <div class"dialog-actions">
      <button mat-button type="button" (click)="onCancel()">Cancel</button>
      <button mat-flat-button color="primary" type="submit" [disabled]="!appointmentForm.valid">
        Schedule
      </button>
    </div> -->
  </form>
</div>
