<div class="dialog-container">
  <div class="dialog-header">
    <h2>Schedule Appointment</h2>
    <button mat-icon-button (click)="onCancel()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <form [formGroup]="appointmentForm" (ngSubmit)="onSubmit()">
    <div mat-dialog-content>
      <!-- Date -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Date</mat-label>
          <input matInput [matDatepicker]="picker" formControlName="appointmentDate" [min]="minDate">
          <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <mat-error *ngIf="appointmentForm.get('appointmentDate')?.hasError('required')">
            Date is required
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Location -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Location (Optional)</mat-label>
          <input matInput formControlName="location" placeholder="Enter location">
        </mat-form-field>
      </div>

      <!-- Participant -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Select Participant</mat-label>
          <mat-select formControlName="participantId">
            <mat-option *ngFor="let participant of participants" [value]="participant.id">
              {{ participant.fullName }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="appointmentForm.get('participantId')?.hasError('required')">
            Participant is required
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Doctor -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Select Doctor</mat-label>
          <mat-select formControlName="doctorId">
            <mat-option *ngFor="let doctor of doctors" [value]="doctor.id">
              {{ doctor.fullName }} - {{ doctor.specialization }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="appointmentForm.get('doctorId')?.hasError('required')">
            Doctor is required
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Trial -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Select Trial</mat-label>
          <mat-select formControlName="trialId">
            <mat-option *ngFor="let trial of trials" [value]="trial.id">
              {{ trial.name }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="appointmentForm.get('trialId')?.hasError('required')">
            Trial is required
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Notes -->
      <div class="form-field">
        <mat-form-field appearance="outline">
          <mat-label>Notes (Optional)</mat-label>
          <textarea matInput formControlName="notes" rows="3" placeholder="Add any notes"></textarea>
        </mat-form-field>
      </div>
    </div>

    <!-- Buttons -->
    <div class="dialog-actions">
      <button mat-button type="button" (click)="onCancel()">Cancel</button>
      <button mat-raised-button color="primary" type="submit" [disabled]="!appointmentForm.valid">
        Schedule
      </button>
    </div>
    <!-- <div class"dialog-actions">
      <button mat-button type="button" (click)="onCancel()">Cancel</button>
      <button mat-flat-button color="primary" type="submit" [disabled]="!appointmentForm.valid">
        Schedule
      </button>
    </div> -->
  </form>
</div>
